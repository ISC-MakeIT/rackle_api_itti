-- MySQL dump 10.16  Distrib 10.1.34-MariaDB, for Win32 (AMD64)
--
-- Host: localhost    Database: rackle
-- ------------------------------------------------------
-- Server version	10.1.34-MariaDB

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `corner_points`
--

DROP TABLE IF EXISTS `corner_points`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `corner_points` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '曲がり角ID',
  `latitude` double(20,17) unsigned NOT NULL COMMENT '曲がり角の緯度',
  `longitude` double(20,17) unsigned NOT NULL COMMENT '曲がり角の経度',
  `floor` int(11) NOT NULL COMMENT '曲がり角の階',
  `navigation_lines_id` int(11) unsigned NOT NULL COMMENT 'どのナビライン上の曲がり角か',
  `prev` int(11) unsigned DEFAULT NULL COMMENT '次の曲がり角',
  `next` int(11) unsigned DEFAULT NULL COMMENT '前の曲がり角',
  PRIMARY KEY (`id`),
  KEY `navigation_lines_id` (`navigation_lines_id`),
  CONSTRAINT `corner_points_ibfk_1` FOREIGN KEY (`navigation_lines_id`) REFERENCES `navigation_lines` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `gates`
--

DROP TABLE IF EXISTS `gates`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `gates` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '改札ID',
  `name` varchar(50) CHARACTER SET utf8 NOT NULL COMMENT '改札名',
  `stations_id` int(11) unsigned NOT NULL COMMENT '駅識別',
  `train_courses_id` int(11) unsigned NOT NULL COMMENT '路線識別',
  `latitude` double(20,17) unsigned NOT NULL COMMENT '改札の緯度',
  `longitude` double(20,17) unsigned NOT NULL COMMENT '改札の経度',
  `floor` int(11) NOT NULL COMMENT '改札の階',
  PRIMARY KEY (`id`),
  KEY `stations_id` (`stations_id`),
  KEY `train_courses_id` (`train_courses_id`),
  CONSTRAINT `gates_ibfk_1` FOREIGN KEY (`stations_id`) REFERENCES `stations` (`id`),
  CONSTRAINT `gates_ibfk_2` FOREIGN KEY (`train_courses_id`) REFERENCES `train_courses` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `movies`
--

DROP TABLE IF EXISTS `movies`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `movies` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '動画ID',
  `name` varchar(50) CHARACTER SET utf8 NOT NULL COMMENT '動画名',
  `youtube_url` varchar(11) CHARACTER SET utf8 NOT NULL COMMENT 'YouTubeのURL',
  `latitude` double(20,17) unsigned NOT NULL COMMENT '動画開始地点の緯度',
  `longitude` double(20,17) unsigned NOT NULL COMMENT '動画開始地点の経度',
  `floor` int(11) NOT NULL COMMENT '動画開始地点の階',
  `navigation_lines_id` int(11) unsigned NOT NULL COMMENT 'どのナビライン上の動画か',
  `prev` int(11) unsigned DEFAULT NULL COMMENT '次の動画',
  `next` int(11) unsigned DEFAULT NULL COMMENT '前の動画',
  PRIMARY KEY (`id`),
  KEY `navigation_lines_id` (`navigation_lines_id`),
  CONSTRAINT `movies_ibfk_1` FOREIGN KEY (`navigation_lines_id`) REFERENCES `navigation_lines` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `navigation_lines`
--

DROP TABLE IF EXISTS `navigation_lines`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `navigation_lines` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ナビラインID',
  `name` varchar(50) CHARACTER SET utf8 NOT NULL COMMENT 'ナビライン名',
  `start_gates_id` int(11) unsigned NOT NULL COMMENT '始点改札',
  `end_gates_id` int(11) unsigned NOT NULL COMMENT '終点改札',
  `youtube_playlist_id` int(34) unsigned NOT NULL COMMENT 'YouTubePlaylistのID',
  PRIMARY KEY (`id`),
  KEY `start_gates_id` (`start_gates_id`),
  KEY `end_gates_id` (`end_gates_id`),
  CONSTRAINT `navigation_lines_ibfk_1` FOREIGN KEY (`start_gates_id`) REFERENCES `gates` (`id`),
  CONSTRAINT `navigation_lines_ibfk_2` FOREIGN KEY (`end_gates_id`) REFERENCES `gates` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `stations`
--

DROP TABLE IF EXISTS `stations`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `stations` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '駅ID',
  `name` varchar(50) CHARACTER SET utf8 NOT NULL COMMENT '駅名',
  `latitude` double(20,17) unsigned NOT NULL COMMENT '駅の緯度',
  `longitude` double(20,17) unsigned NOT NULL COMMENT '駅の経度',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Table structure for table `train_courses`
--

DROP TABLE IF EXISTS `train_courses`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `train_courses` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '路線ID',
  `name` varchar(50) CHARACTER SET utf8 NOT NULL COMMENT '路線名',
  `stations_id` int(11) unsigned NOT NULL COMMENT '駅識別',
  PRIMARY KEY (`id`),
  KEY `stations_id` (`stations_id`),
  CONSTRAINT `train_courses_ibfk_1` FOREIGN KEY (`stations_id`) REFERENCES `stations` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2019-01-20 23:36:59
